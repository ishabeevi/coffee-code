{% extends "base.html" %}
{% block title %}Blood Requests â€“ LifeLink{% endblock %}

{% block content %}
<div class="page-header">
    <h2>ğŸ©¸ Blood Requests</h2>
    <a href="/request" class="btn-primary">+ Post Request</a>
</div>

<!-- Tabs -->
<div class="tabs">
    <a href="/requests?tab=all" class="tab {% if tab == 'all' %}active{% endif %}">All Requests</a>
    <a href="/requests?tab=emergency" class="tab {% if tab == 'emergency' %}active{% endif %}">ğŸš¨ Emergency</a>
</div>

{% set display = emergency_requests if tab == 'emergency' else all_requests %}

{% if display %}
<div class="request-grid">
    {% for req in display %}
    <div class="request-card {% if req.emergency %}emergency-card-bg{% endif %}">
        <div class="rc-top">
            <span class="blood-badge">{{ req.blood_group }}</span>
            {% if req.emergency %}
            <span class="badge-emergency">ğŸš¨ Emergency</span>
            {% else %}
            <span class="badge-normal">ğŸŸ¢ Normal</span>
            {% endif %}
        </div>
        <div class="rc-info">
            <div class="rc-row"><span class="rc-label">ğŸ¥ Hospital</span> {{ req.hospital }}</div>
            <div class="rc-row"><span class="rc-label">ğŸ“ Location</span> {{ req.location.title() }}</div>
            <div class="rc-row"><span class="rc-label">ğŸ“… Posted</span> {{ req.created_at }}</div>
        </div>
        <a href="/match/{{ req.id }}" class="btn-primary full-width mt-sm">ğŸ” Find Matched Donors</a>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <div class="empty-icon">ğŸ©¸</div>
    <h3>No requests found</h3>
    <p>Be the first to post a blood request.</p>
    <a href="/request" class="btn-primary">Post a Request</a>
</div>
{% endif %}
{% endblock %}